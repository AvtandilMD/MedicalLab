<!DOCTYPE html>
<html lang="ka">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CBC áƒáƒœáƒáƒšáƒ˜áƒ–áƒ˜</title>
    <style>
        *{box-sizing:border-box;font-family:'Segoe UI',Tahoma,sans-serif}
        body{background:linear-gradient(135deg,#667eea,#764ba2);min-height:100vh;margin:0;padding:20px}
        .container{max-width:1000px;margin:0 auto;background:#fff;border-radius:20px;padding:30px;box-shadow:0 20px 60px rgba(0,0,0,0.3)}
        .header{text-align:center;border-bottom:3px solid #4CAF50;padding-bottom:15px;margin-bottom:20px}
        .logo{font-size:40px;color:#e74c3c}
        .clinic-name{font-size:24px;color:#2e7d32;font-weight:bold;margin:10px 0}
        .section{background:#f8f9fa;border-radius:15px;padding:20px;margin-bottom:20px;border-left:5px solid #3498db}
        .section-title{color:#2c3e50;font-size:18px;font-weight:bold;margin-bottom:15px}
        .form-row{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:12px;margin-bottom:12px}
        .form-group{display:flex;flex-direction:column}
        label{font-weight:600;color:#34495e;margin-bottom:4px;font-size:13px}
        input,textarea{padding:10px;border:2px solid #e0e0e0;border-radius:8px;font-size:13px}
        input:focus,textarea:focus{outline:none;border-color:#3498db}
        table{width:100%;border-collapse:collapse;margin-top:10px;background:#fff}
        th{background:linear-gradient(135deg,#3498db,#2980b9);color:#fff;padding:10px;text-align:left;font-size:12px}
        td{padding:8px;border-bottom:1px solid #ecf0f1;font-size:12px}
        tr:hover{background:#f5f5f5}
        .result-input{width:100%;padding:6px;border:2px solid #e0e0e0;border-radius:6px;text-align:center}
        .leuko-section{border-left-color:#27ae60}
        .leuko-section th{background:linear-gradient(135deg,#27ae60,#229954)}
        .morph-section{border-left-color:#9b59b6}
        .footer-section{border-left-color:#e67e22}
        textarea{min-height:50px;resize:vertical}
        .buttons{text-align:center;margin-top:25px;padding-top:25px;border-top:2px dashed #bdc3c7}
        .btn{padding:15px 40px;font-size:16px;font-weight:bold;border-radius:50px;border:none;cursor:pointer;margin:8px;transition:all .3s;color:#fff}
        .btn-print{background:linear-gradient(135deg,#3498db,#2980b9)}
        .btn:hover{transform:translateY(-3px);box-shadow:0 8px 20px rgba(0,0,0,0.2)}
        .required::after{content:' *';color:#e74c3c}
        .ref{font-size:10px;color:#7f8c8d}
        .back-btn{display:inline-block;margin-bottom:15px;padding:8px 16px;background:#95a5a6;color:#fff;text-decoration:none;border-radius:8px;font-size:13px}
        .back-btn:hover{background:#7f8c8d}
    </style>
</head>
<body>
<div class="container">
    <a href="/" class="back-btn">â† áƒ›áƒ—áƒáƒ•áƒáƒ  áƒ’áƒ•áƒ”áƒ áƒ“áƒ–áƒ”</a>
    <div class="header">
        <div class="logo">âœš</div>
        <div class="clinic-name">PREMIUM MEDI / áƒáƒ áƒ”áƒ›áƒ˜áƒ£áƒ› áƒ›áƒ”áƒ“áƒ˜</div>
        <div>áƒ¡áƒáƒáƒ¯áƒáƒ®áƒ áƒ›áƒ”áƒ“áƒ˜áƒªáƒ˜áƒœáƒ˜áƒ¡ áƒªáƒ”áƒœáƒ¢áƒ áƒ˜ | áƒ¢áƒ”áƒš: 558-27-55-51</div>
    </div>
    <form id="mainForm" method="POST">
        <div class="section">
            <div class="section-title">ğŸ‘¤ áƒáƒáƒªáƒ˜áƒ”áƒœáƒ¢áƒ˜áƒ¡ áƒ˜áƒœáƒ¤áƒáƒ áƒ›áƒáƒªáƒ˜áƒ</div>
            <div class="form-row">
                <div class="form-group"><label class="required">áƒ¡áƒáƒ®áƒ”áƒšáƒ˜</label><input type="text" name="first_name" id="first_name" required></div>
                <div class="form-group"><label class="required">áƒ’áƒ•áƒáƒ áƒ˜</label><input type="text" name="last_name" id="last_name" required></div>
                <div class="form-group"><label>áƒáƒ¡áƒáƒ™áƒ˜</label><input type="number" name="age"></div>
                <div class="form-group"><label class="required">áƒ—áƒáƒ áƒ˜áƒ¦áƒ˜</label><input type="date" name="test_date" id="test_date" required></div>
            </div>
        </div>
        <div class="section">
            <div class="section-title">ğŸ©¸ áƒ¡áƒ˜áƒ¡áƒ®áƒšáƒ˜áƒ¡ áƒ¡áƒáƒ”áƒ áƒ—áƒ áƒáƒœáƒáƒšáƒ˜áƒ–áƒ˜ (CBC)</div>
            <table>
                <thead><tr><th>áƒáƒ‘áƒ áƒ”áƒ•.</th><th>áƒáƒáƒ áƒáƒ›áƒ”áƒ¢áƒ áƒ˜</th><th>áƒ¨áƒ”áƒ“áƒ”áƒ’áƒ˜</th><th>áƒœáƒáƒ áƒ›áƒ</th><th>áƒ”áƒ áƒ—áƒ”áƒ£áƒšáƒ˜</th></tr></thead>
                <tbody>
                {% for item in template.cbc_analysis %}
                <tr>
                    <td><strong>{{ item.abbr }}</strong></td>
                    <td>{{ item.parameter }}</td>
                    <td><input type="text" class="result-input" name="cbc_{{ item.abbr }}"></td>
                    <td class="ref">{{ item.reference_range }}</td>
                    <td class="ref">{{ item.unit }}</td>
                </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
        <div class="section leuko-section">
            <div class="section-title">ğŸ”¬ áƒšáƒ”áƒ˜áƒ™áƒáƒªáƒ˜áƒ¢áƒáƒ áƒ£áƒšáƒ˜ áƒ¤áƒáƒ áƒ›áƒ£áƒšáƒ</div>
            <table>
                <thead><tr><th>áƒáƒáƒ áƒáƒ›áƒ”áƒ¢áƒ áƒ˜</th><th>áƒ¨áƒ”áƒ“áƒ”áƒ’áƒ˜</th><th>áƒœáƒáƒ áƒ›áƒ</th></tr></thead>
                <tbody>
                {% for item in template.leukocyte_formula %}
                <tr>
                    <td>{{ item.parameter }}</td>
                    <td><input type="text" class="result-input" name="leuko_{{ loop.index0 }}"></td>
                    <td class="ref">{{ item.norm }}</td>
                </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
        <div class="section morph-section">
            <div class="section-title">ğŸ” áƒ›áƒáƒ áƒ¤áƒáƒšáƒáƒ’áƒ˜áƒ</div>
            <div class="form-row">
                <div class="form-group"><label>áƒ”áƒ áƒ˜áƒ—áƒ áƒáƒªáƒ˜áƒ¢áƒ˜áƒ¡ áƒ›áƒáƒ áƒ¤áƒáƒšáƒáƒ’áƒ˜áƒ</label><textarea name="erythrocyte_morphology"></textarea></div>
                <div class="form-group"><label>áƒšáƒ”áƒ˜áƒ™áƒáƒªáƒ˜áƒ¢áƒ˜áƒ¡ áƒ›áƒáƒ áƒ¤áƒáƒšáƒáƒ’áƒ˜áƒ</label><textarea name="leukocyte_morphology"></textarea></div>
            </div>
        </div>
        <div class="section footer-section">
            <div class="section-title">ğŸ‘¨â€âš•ï¸ áƒ’áƒáƒ›áƒáƒ™áƒ•áƒšáƒ”áƒ•áƒ˜áƒ¡ áƒ˜áƒœáƒ¤áƒáƒ áƒ›áƒáƒªáƒ˜áƒ</div>
            <div class="form-group"><label>áƒ’áƒáƒ›áƒáƒ™áƒ•áƒšáƒ”áƒ•áƒ áƒ¨áƒ”áƒáƒ¡áƒ áƒ£áƒšáƒ</label><input type="text" name="doctor_name"></div>
        </div>
        <div class="buttons">
            <button type="button" class="btn btn-print" onclick="printDoc()">ğŸ–¨ï¸ áƒ‘áƒ”áƒ­áƒ“áƒ•áƒ áƒ“áƒ áƒ¨áƒ”áƒœáƒáƒ®áƒ•áƒ</button>
        </div>
    </form>
</div>
<script>
document.getElementById('test_date').value = new Date().toISOString().split('T')[0];
function validate(){
    var fn=document.getElementById('first_name').value.trim();
    var ln=document.getElementById('last_name').value.trim();
    var dt=document.getElementById('test_date').value.trim();
    if(!fn||!ln||!dt){alert('áƒ¨áƒ”áƒáƒ•áƒ¡áƒ”áƒ— áƒ¡áƒáƒ•áƒáƒšáƒ“áƒ”áƒ‘áƒ£áƒšáƒ áƒ•áƒ”áƒšáƒ”áƒ‘áƒ˜');return false;}
    return true;
}
function printDoc(){
    if(!validate())return;
    var f=document.getElementById('mainForm');
    f.action='/cbc/print';
    f.target='_blank';
    f.submit();
}
</script>
</body>
</html>